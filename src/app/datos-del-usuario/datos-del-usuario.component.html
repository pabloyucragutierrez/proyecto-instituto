<app-header></app-header>
<section class="section section__payment">
  <div class="container">
    <div class="stepper">
      <div class="step active">
        <div class="step-icon">
          <i class='bx bx-user'></i>
        </div>
        <p>Datos del Usuario</p>
      </div>
      <!-- <div class="step">
        <div class="step-icon">
          <i class='bx bx-receipt'></i>
        </div>
        <p>Comprobante</p>
      </div> -->
      <div class="step">
        <div class="step-icon">
          <i class='bx bx-package'></i>
        </div>
        <p>Tipo de Entrega</p>
      </div>
      <div class="step">
        <div class="step-icon">
          <i class='bx bx-credit-card'></i>
        </div>
        <p>Pago</p>
      </div>
      <div class="progress-bar">
        <div class="progress" style="width: 0%;"></div>
      </div>
    </div>

    <div class="payment-layout">
      <div class="form-container">
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <div class="form-group half-width">
              <label for="nombres">Nombres</label>
              <input type="text" id="nombres" formControlName="nombres" placeholder="Ingresa tus nombres" />
              <div *ngIf="userForm.get('nombres')?.invalid && userForm.get('nombres')?.touched">
                <small class="error-text">Este campo es obligatorio</small>
              </div>
            </div>
            <div class="form-group half-width">
              <label for="apellidos">Apellidos</label>
              <input type="text" id="apellidos" formControlName="apellidos" placeholder="Ingresa tus apellidos" />
              <div *ngIf="userForm.get('apellidos')?.invalid && userForm.get('apellidos')?.touched">
                <small class="error-text">Este campo es obligatorio</small>
              </div>
            </div>
          </div>

          <!-- <div class="form-row">
            <div class="form-group half-width">
              <label for="tipoDocumento">Tipo de Documento</label>
              <select id="tipoDocumento" formControlName="tipoDocumento">
                <option value="dni">DNI</option>
                <option value="ce">Carnet de Extranjería</option>
                <option value="pasaporte">Pasaporte</option>
              </select>
              <div *ngIf="userForm.get('tipoDocumento')?.invalid && userForm.get('tipoDocumento')?.touched">
                <small class="error-text">Este campo es obligatorio</small>
              </div>
            </div>
            <div class="form-group half-width">
              <label for="numeroDocumento">Número de Documento</label>
              <input type="text" id="numeroDocumento" formControlName="numeroDocumento" placeholder="12345678" />
              <div *ngIf="userForm.get('numeroDocumento')?.invalid && userForm.get('numeroDocumento')?.touched">
                <small class="error-text">Este campo es obligatorio y debe tener al menos 8 caracteres</small>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input type="tel" id="telefono" formControlName="telefono" placeholder="Ingresa tu teléfono" />
            <div *ngIf="userForm.get('telefono')?.invalid && userForm.get('telefono')?.touched">
              <small class="error-text">Este campo es obligatorio y debe ser un número válido</small>
            </div>
          </div> -->

          <button type="submit" class="btn btn-comprar">Continuar</button>
        </form>
      </div>

      <div class="summary-container">
        <h3>Resumen de tu Pedido</h3>

        <!-- <div class="product-card">
          <div class="product-details">
            <p class="product-name"><strong>Foco led Philips</strong></p>
            <p class="product-price">S/ 12.00</p>
          </div>
        </div> -->

        <!-- <div class="total-summary">
          <p class="total-label"><strong>Total:</strong></p>
          <p class="total-amount"><strong>S/ 27.00</strong></p>
        </div> -->
        <div *ngFor="let product of products" class="product-card">
          <img [src]="product.image1" alt="{{ product.title }}" class="product-image" />
          <div class="product-details">
            <p class="product-name"><strong>{{ product.title }}</strong></p>
            <p class="product-price">S/ {{ product.unit_price.toFixed(2) }}</p>
            <p>Cantidad: {{product.quantity}}</p>
          </div>
        </div>
        <div class="total-summary">
          <p class="total-label"><strong>Total:</strong></p>
          <p class="total-amount"><strong>S/ {{ totalAmount.toFixed(2) }}</strong></p>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- Modal de error -->
<div *ngIf="showErrorModal" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">
      <i class='bx bx-x'></i> <!-- Ícono de cierre de Boxicons -->
    </span>
    <h2>Error</h2>
    <p>Por favor, completa todos los campos requeridos antes de continuar.</p>
  </div>
</div>

<app-footer></app-footer>
